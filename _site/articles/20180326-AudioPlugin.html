
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<script src="/assets/js/article.js"></script>















<div class="qitasc-light p-y-4 qitasc-article-header">
    <div class="row">
          <h1>The <span class="orange">IN</span>TACT<sup>®</sup> Audio Plugin</h1>
          <div id="article-subheader">
              <h4>At QiTASC we've created an Audio Plugin that is currently used for monitoring speech channel quality as well as recording and comparing audio files (Audio Fingerprinting) within INTACT test cases. Read on to find out how these new features work.<h4>

              
              
              

              


          </div>
    </div>
  </br>
</div>







</br>


<div class="qitasc-articles-header-img-container">
    <div class="qitasc-articles-header-img-container-content">
          <img class="qitasc-articles-header-img" src="/img/newsroom/AudioPlugin.jpg">
    </div>
</div>









<div id="floating-container">
          
          
          
                <div class="floating-box">
                  <a href="#Introduction"><center>Introduction</center></a></br>
                </div>
          
          
                <div class="floating-box">
                  <a href="#big"><center>The Big Picture</center></a></br>
                </div>
          
          
                <div class="floating-box">
                  <a href="#recordings"><center>How to Create Recordings</center></a></br>
                </div>
          
          
                <div class="floating-box">
                  <a href="#monitor"><center>Speech Channel Monitoring</center></a></br>
                </div>
          
          
                <div class="floating-box">
                  <a href="#fingerprint"><center>Audio Fingerprinting</center></a></br>
                </div>
          
          
                <div class="floating-box">
                  <a href="#conclusion"><center>Conclusion</center></a></br>
                </div>
          
</div>





<div class="floating-container-mobile">
  <input id="collapsible-01" class="toggle-floating-mobile" type="checkbox">
  <label for="collapsible-01" class="lbl-toggle-floating-mobile">Table of Contents</label>
      <div class="collapsible-content-floating-mobile">
        <div class="floating-mobile-spacer"></div>
        
        
        
        <a class="floating-link-mobile" id="toggle-floating-input-1" href="#Introduction"><center>Introduction</center></a></br>
        
        
        <a class="floating-link-mobile" id="toggle-floating-input-2" href="#big"><center>The Big Picture</center></a></br>
        
        
        <a class="floating-link-mobile" id="toggle-floating-input-3" href="#recordings"><center>How to Create Recordings</center></a></br>
        
        
        <a class="floating-link-mobile" id="toggle-floating-input-4" href="#monitor"><center>Speech Channel Monitoring</center></a></br>
        
        
        <a class="floating-link-mobile" id="toggle-floating-input-5" href="#fingerprint"><center>Audio Fingerprinting</center></a></br>
        
        
        <a class="floating-link-mobile" id="toggle-floating-input-6" href="#conclusion"><center>Conclusion</center></a></br>
        
      </div>

</div>




<div class="qitasc-white qitasc-article-content">
  
<h1 id="new-feature-the-intact-audio-plugin--">New Feature: The INTACT Audio Plugin  <a name="Introduction"></a></h1>

<p>The <strong>INTACT Audio Plugin</strong> fulfils three purposes:</p>

<ul>
  <li>Making phone call recordings</li>
  <li>Monitoring a speech channel</li>
  <li>Detecting and comparing announcements (Audio Fingerprinting)</li>
</ul>

<p>All of the steps and configurations described in this article are available in a dedicated <strong>INTACT Manual</strong> <a href="https://docs.qitasc.com/intactsteps/audiointro/">Audio and Speech Channel Steps and Compound Steps</a>.</p>

<p>Using the <strong>INTACT Audio Plugin</strong> requires the following setup:</p>
<ul>
  <li>A Raspberry Pi for each phone that is used for audio recording.</li>
  <li>The Raspberry Pi running a service called <code class="highlighter-rouge">Audio Service</code>.</li>
  <li>Each Raspberry Pi is connected through a USB sound card to a given phone using a special audio cable.</li>
  <li>A phone’s unique mapping to the Raspberry Pi configured via <strong>INTACT</strong> to link the phone’s serial number to the Raspberry’s IP address.</li>
</ul>

<p><img src="/img/articles/audioPlugin/Audio01_Setup.jpg" alt="alt text" /></p>

<h2 id="the-big-picture-">The Big Picture <a name="big"></a></h2>
<p>Whenever a recording is required on a given phone, <strong>INTACT</strong> looks up the IP address of the Raspberry Pi that it is configured to. <strong>INTACT</strong> connects to the <code class="highlighter-rouge">Audio Service</code> on a configured URL to <strong>start</strong>, <strong>stop</strong>, and eventually <strong>retrieve</strong> the recording. The recording is a <code class="highlighter-rouge">*.wav</code> file that is attached to the test report.</p>

<p>The <code class="highlighter-rouge">Audio Service</code> is an HTTP (REST) service that is located on a Raspberry Pi. It permits:</p>

<ul>
  <li>Starting a recording</li>
  <li>Stopping a recording</li>
  <li>Starting a playback of a recording</li>
  <li>Stopping a playback of a recording</li>
  <li>Retrieving a recording</li>
  <li>Resetting the <code class="highlighter-rouge">Audio Service</code></li>
</ul>

<h2 id="how-to-create-recordings-">How to Create Recordings <a name="recordings"></a></h2>

<p>A <strong>Recording Step</strong> is written in a test case, which records audio from a device. The recording is attached to the test report as a single channel (mono), 8-bit unsigned <code class="highlighter-rouge">wav</code> file with 8 kHz sample rate. This is an uncompressed, low-quality audio format that is sufficient for speech channel recordings.</p>

<h2 id="speech-channel-monitoring-">Speech Channel Monitoring <a name="monitor"></a></h2>
<p>Speech channel monitoring involves two phones (let’s call them <code class="highlighter-rouge">A</code> and <code class="highlighter-rouge">B</code>) that are under <strong>INTACT’s</strong> control. Whenever a call is established between the phones, <strong>INTACT’s</strong> Speech Channel Monitoring steps can be used to assess speech channel quality.</p>

<p>The speech channel consists of two independent directions: <code class="highlighter-rouge">A =&gt; B</code> and <code class="highlighter-rouge">B =&gt; A</code>. When a speech channel monitoring step is used, phone <code class="highlighter-rouge">A</code> plays a given reference audio file using the <code class="highlighter-rouge">Audio Service</code>. At the same time, phone <code class="highlighter-rouge">B</code> records the call established between the phones. In parallel, the speech channel’s <strong>reverse direction</strong> is covered by playing the reference audio file on <code class="highlighter-rouge">B</code> and recording it on <code class="highlighter-rouge">A</code>. The recordings on <code class="highlighter-rouge">A</code> and <code class="highlighter-rouge">B</code> are attached to the test report.</p>

<p>After creating the recordings, they are analyzed to judge the speech channel’s quality as described below.</p>

<h3 id="how-speech-channel-monitoring-works">How Speech Channel Monitoring Works</h3>

<p>The reference audio files are fixed audio files that are located on the Raspberry Pi’s <code class="highlighter-rouge">Audio Service</code>. They consists of beeps with a duration of <strong>300ms</strong> and a frequency of <strong>800Hz</strong> and <strong>1100Hz</strong>: One phone will play the 800Hz file and the other phone will play the 1100Hz file. The pauses between the beeps last <strong>300ms</strong>. Monitoring a speech channel’s quality in a given direction (e.g. <code class="highlighter-rouge">A =&gt; B</code> or <code class="highlighter-rouge">B =&gt; A</code>) consists of playing back the reference file on <code class="highlighter-rouge">A</code> and recording it on <code class="highlighter-rouge">B</code>. The recording and analysis for both <code class="highlighter-rouge">A =&gt; B</code> and <code class="highlighter-rouge">B =&gt; A</code> are done once and in parallel.</p>

<p>When the recording on <code class="highlighter-rouge">B</code> has finished, the recorder audio file is analyzed to detect the locations and durations of beeps and pauses.</p>

<p><img src="/img/articles/audioPlugin/Audio02_Beeps.jpg" alt="alt text" /></p>

<p>The recording’s analysis uses:</p>

<ul>
  <li>
    <p><strong>Total number of beeps</strong>: If the total number of beeps does not meet or exceed the minimum threshold of expected beeps, the monitoring is considered failed.</p>
  </li>
  <li>
    <p><strong>Predominant frequency</strong>: The recording’s predominant frequency <strong>must match</strong> the beeps’ nominal frequency (800 Hz or 1100Hz). If the call channel is broken, a white noise recording would fail the frequency check.</p>
  </li>
  <li>
    <p><strong>Pause position and duration</strong>: If a pause is too long, one or more beeps are missing from the recording.</p>
  </li>
</ul>

<h2 id="audio-fingerprinting-">Audio Fingerprinting <a name="fingerprint"></a></h2>
<p><strong>Audio Fingerprinting’s</strong> purpose is to match a given recording against a database of reference announcements.</p>

<p>A given audio recording is compared to a set of reference recordings by using the <strong>INTACT</strong> <code class="highlighter-rouge">Audio Matcher</code>. The <code class="highlighter-rouge">Audio Matcher</code> reads the audio recording and uses an algorithm to compute a collection of <strong>Audio Fingerprints</strong>. This collection of fingerprints is characteristic of the recording. The fingerprints of the recording to be assessed is then <strong>compared to a collection of fingerprints</strong> that is calculated from reference recordings. Every comparison yields a <strong>similarity score</strong> between <code class="highlighter-rouge">0</code> and <code class="highlighter-rouge">100</code>. A higher number indicates a stronger similarity to the reference recording.</p>

<p><strong>Hint:</strong> Audio fingerprints can be visualized as a cloud of points in a spectrogram. This point cloud is characteristic of the audio signal.</p>

<p><img src="/img/articles/audioPlugin/Audio04_Fingerprint.jpg" alt="alt text" /></p>

<h3 id="using-the-audio-fingerprinting">Using the Audio Fingerprinting</h3>

<p><strong>Audio Fingerprinting Stepdefs</strong> are used to match reference files against recordings. The <strong>INTACT log</strong> then shows the scores for matching the given recording with the reference database.</p>

<p><strong>INTACT</strong> matches a recording against a set of recordings announcements by:</p>

<ul>
  <li>Calculating the recording’s fingerprints.</li>
  <li>Comparing the recording’s fingerprints with all reference announcements’ fingerprints. Every comparison yields a similarity score.</li>
  <li>The best match is the match with the highest number of equal fingerprints.</li>
</ul>

<p>When <strong>INTACT</strong> starts, all the <code class="highlighter-rouge">*.wav</code> files in the <code class="highlighter-rouge">referenceDirectory</code> are fingerprinted to build up a reference database. This is done for each profile and the reference database file name contains the profile identifier. <strong>INTACT</strong> detects changes in the reference <code class="highlighter-rouge">*.wav</code> files such that those changes are properly propagated to the reference database without re-indexing all the files.</p>

<p>If, for the best match, the number of equal fingerprints is below a configured <strong>minimum confidence level</strong>, the match is considered to be <strong>failed</strong>. The integer number of equal fingerprints is then converted to a percentage based on the total number of the recording’s fingerprints. If this percentage is <strong>lower than the minimum score</strong> as given by the step, the match is a <strong>low-quality match</strong>.</p>

<p>The the match is only considered good if the similarity percentage is above the limit set by the stepdef</p>

<p><img src="/img/articles/audioPlugin/Audio05_Scores.jpg" alt="alt text" /></p>

<h2 id="conclusion-">Conclusion <a name="conclusion"></a></h2>

<p>The INTACT <strong>Audio Plugin</strong> expands the scope of testing by adding <strong>speech channel monitoring</strong> and the <strong>Audio Fingerprinting</strong> to its suite of features. The setup involves minimal hardware: A phone only needs a Raspberry Pi connected through a USB sound card to use these features. Both speech channel monitoring and Audio Fingerprinting provide <strong>scores</strong> to help determine if the <strong>audio quality or content</strong> matches your test’s requirements.</p>

<p>If you would like to create test cases using the Audio Plugin, the INTACT Manual’s <a href="https://docs.qitasc.com/intactsteps/audiointro/">Audio and Speech Channel</a> chapter contains reference material about INTACT’s built-in steps and and examples.</p>

</div>





</br>
</br>
</br>
</br>

<div class="footer-dark">
        <footer>
            <div class="container">
                <div class="row">
                    <div class="col-sm-6 col-md-3 item">
                        <div class="footer_h3">Testing Services</div>
                        <ul>
                            <li><a href="/">Project-Based Services</a></li>
                            <li><a href="/">Corporate Testing</a></li>
                            <li><a href="/">Consulting</a></li>
                        </ul>
                    </div>
                    <div class="col-sm-6 col-md-3 item">
                        <div class="footer_h3">Products</div>
                        <ul>
                            <li><a href="/">conQlude</a></li>
                            <li><a href="/">cheQ</a></li>
                            <li><a href="/">intaQt</a></li>
                        </ul>
                    </div>
                    <div class="col-sm-6 col-md-3 item">
                        <div class="footer_h3">About Us</div>
                        <ul>
                            <li><a href="/about/philosophy#contact">Impressum</a></li>
                            <li><a href="/about/philosophy#contact">Contact</a></li>
                            <li><a href="/about/career">Careers</a></li>
                            <li><a href="/about/privacy">Privacy Policy</a></li>
                        </ul>
                    </div>
                    <div class="col-sm-6 col-md-3 item">
                        <div class="footer_h3">Resources</div>
                        <ul>
                            <li><a target="_blank" href="https://docs.qitasc.com">Documentation</a></li>
                            <li><a href="/newsroom">Newsroom</a></li>

                        </ul>
                    </div>
                </div>
                <p class="copyright">QiTASC © 2019</p>
            </div>
        </footer>
    </div>

